<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Employee Payroll Login</title>
    <link rel="stylesheet" href="style2.css" />
  </head>
  <body >
    <div class="login-wrapper">
      <h1 class="main-heading">Employee Payroll System</h1>

      <div class="login-box">
        <form id="loginForm">
          <div class="input-group">
            <label class="sr-only" for="employee-id">Username</label>
            <input
              type="text"
              id="employee-id"
              placeholder="Username"
              required
            />
          </div>

          <div class="input-group">
            <label class="sr-only" for="password">Password</label>
            <input
              type="password"
              id="password"
              placeholder="Password"
              required
            />
          </div>

          <div class="options">
            <label><input type="checkbox" /> Remember me</label>
            <a href="#">Forgot Password?</a>
          </div>

          <button type="submit" class="login-btn">Sign In</button>

          <!-- Message Area -->
          <p id="loginMsg" style="margin-top: 12px; font-size: 14px"></p>
        </form>

        <div class="footer">
          <p>Contact HR for support</p>
        </div>
      </div>
    </div>

    <!-- ================= SCRIPT ================= -->
    <script type="module">
      import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

      /* -------- Supabase Setup -------- */
      const SUPABASE_URL = "https://vknwznfpuzxgzmgxvxvi.supabase.co";
      const SUPABASE_ANON_KEY =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZrbnd6bmZwdXp4Z3ptZ3h2eHZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0OTM5ODgsImV4cCI6MjA4NDA2OTk4OH0.Y7wX5fHQH_5jiUK5g7O8XanlsMDBqsOarmJA_aTTmxU";

      const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

      /* -------- DOM -------- */
      const form = document.getElementById("loginForm");
      const loginMsg = document.getElementById("loginMsg");

      /* -------- Login Logic -------- */
      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const username = document.getElementById("employee-id").value.trim();
        const password = document.getElementById("password").value.trim();

        if (!username || !password) {
          loginMsg.textContent = "Please enter username and password";
          loginMsg.style.color = "red";
          return;
        }

        loginMsg.textContent = "Checking credentials...";
        loginMsg.style.color = "#555";

        const { data, error } = await supabase
          .from("HR_password")
          .select("username")
          .eq("username", username)
          .eq("password", password)
          .single();

        if (error || !data) {
          loginMsg.textContent = "Invalid username or password";
          loginMsg.style.color = "red";
          return;
        }

        // âœ… Success
        loginMsg.textContent = "Login successful!";
        loginMsg.style.color = "green";

        localStorage.setItem("isLoggedIn", "true");

        setTimeout(() => {
          window.location.href = "dashboard.html";
        }, 1000);
      });
    </script>
    <footer
      style="
        width: 100%;
        text-align: center;
        color: #6b7280; /* Tailwind's gray-500 */
        font-size: 0.875rem; /* Tailwind's text-sm */
        border-top: 1px solid #9ca3af; /* Tailwind's gray-400 */
        padding: 0.5rem 0;
        position: absolute;
        bottom: 0;
        background-color: #ffffff;
      "
    >
      &copy; <span id="year"></span> Javeria Akram. All rights reserved.
    </footer>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>
  </body>
</html>
